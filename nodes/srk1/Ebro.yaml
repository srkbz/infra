environment:
  STATE_DIR: "${EBRO_ROOT}/.state"
  CACHE_DIR: "${EBRO_ROOT}/.cache"

imports:
  ebrow-service:
    from: ../../modules/ebrow-service
  utils:
    from: ../../modules/utils
  port-registry:
    from: ../../modules/port-registry
  cron:
    from: ../../modules/cron
  apt:
    from: ../../modules/apt
  vpn:
    from: ../../modules/vpn
  docker:
    from: ../../modules/docker
  secrets:
    from: ../../modules/secrets
  caddy:
    from: ../../modules/caddy
  webhook:
    from: ../../modules/webhook
  watchtower:
    from: ../../modules/watchtower
  uptime-kuma:
    from: ../../modules/uptime-kuma
    environment:
      UPTIME_KUMA_HOST: "10.10.0.1"
  freshrss:
    from: ../../modules/freshrss
    environment:
      FRESHRSS_HOST: "10.10.0.1"
  restic:
    from: ../../modules/restic

  static-site-sirikon.me:
    from: ../../modules/static-site
    environment:
      DOMAIN: sirikon.me
      REPOSITORY: https://github.com/sirikon/sirikon.me.git
      BRANCH: master

  static-site-osoondo.com:
    from: ../../modules/static-site
    environment:
      DOMAIN: osoondo.com
      REPOSITORY: https://github.com/sirikon/osoondo.com.git
      BRANCH: master

  static-site-egin.sirikon.me:
    from: ../../modules/static-site
    environment:
      DOMAIN: egin.sirikon.me
      REPOSITORY: https://github.com/sirikon/egin.git
      BRANCH: master

  static-site-astenagusia.eus:
    from: ../../modules/static-site
    environment:
      DOMAIN: astenagusia.eus
      REPOSITORY: https://github.com/sirikon/astenagusia.git
      BRANCH: master

  static-site-2048.sirikon.me:
    from: ../../modules/static-site
    environment:
      DOMAIN: 2048.sirikon.me
      REPOSITORY: https://github.com/sirikon/2048.git
      BRANCH: master

  static-site-ebro.sirikon.me:
    from: ../../modules/static-site
    environment:
      DOMAIN: ebro.sirikon.me
      REPOSITORY: https://github.com/sirikon/ebro.git
      BRANCH: master

tasks:
  default:
    requires:
      - ebrow-service
      - cron
      - apt
      - vpn:server
      - docker
      - secrets
      - caddy
      - webhook
      - watchtower
      - uptime-kuma
      - freshrss
      - restic
      - static-site-sirikon.me
      - static-site-osoondo.com
      - static-site-egin.sirikon.me
      - static-site-astenagusia.eus
      - static-site-2048.sirikon.me
      - static-site-ebro.sirikon.me
