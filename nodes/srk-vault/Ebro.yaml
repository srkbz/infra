environment:
  STATE_DIR: "${EBRO_ROOT}/.state"
  CACHE_DIR: "${EBRO_ROOT}/.cache"
  DATA_DIR: "/data"

imports:
  apt: { from: "../../modules/apt" }
  discover: { from: "../../modules/discover" }
  base-dirs: { from: "../../modules/base-dirs" }
  cron: { from: "../../modules/cron" }
  docker: { from: "../../modules/docker" }

tasks:
  default:
    requires: [discover, base-dirs, data-dir]
  
  data-dir:
    extends: [":utils:dir"]
    environment:
      DIR: "${DATA_DIR}"
      PERM: "700"

  example:
    labels:
      discover: "true"
    requires: [base-dirs]
    script: echo Hello world
